CREATE TABLE [dbo].[UserProfile] (
    [Id] [int] NOT NULL IDENTITY,
    [Username] [nvarchar](max),
    CONSTRAINT [PK_dbo.UserProfile] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[webpages_Roles] (
    [RoleId] [int] NOT NULL IDENTITY,
    [RoleName] [nvarchar](256) NOT NULL,
    [CompanyId] [int],
    CONSTRAINT [PK_dbo.webpages_Roles] PRIMARY KEY ([RoleId])
)
CREATE TABLE [dbo].[RoleClaim] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Value] [nvarchar](max),
    [RoleId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.RoleClaim] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_RoleId] ON [dbo].[RoleClaim]([RoleId])
CREATE TABLE [dbo].[Training] (
    [Id] [int] NOT NULL IDENTITY,
    [PlannedStartDate] [datetimeoffset](7) NOT NULL,
    [PlannedEndDate] [datetimeoffset](7) NOT NULL,
    [DesiredStartDate] [datetimeoffset](7) NOT NULL,
    [DesireEndDate] [datetimeoffset](7) NOT NULL,
    [Status] [nvarchar](max),
    [Subject] [nvarchar](max),
    CONSTRAINT [PK_dbo.Training] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Student] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Training_Id] [int],
    CONSTRAINT [PK_dbo.Student] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_Training_Id] ON [dbo].[Student]([Training_Id])
CREATE TABLE [dbo].[webpages_Membership] (
    [UserId] [int] NOT NULL,
    [CreateDate] [datetime],
    [ConfirmationToken] [nvarchar](128),
    [IsConfirmed] [bit],
    [LastPasswordFailureDate] [datetime],
    [PasswordFailuresSinceLastSuccess] [int] NOT NULL,
    [Password] [nvarchar](128) NOT NULL,
    [PasswordChangedDate] [datetime],
    [PasswordSalt] [nvarchar](128) NOT NULL,
    [PasswordVerificationToken] [nvarchar](128),
    [PasswordVerificationTokenExpirationDate] [datetime],
    CONSTRAINT [PK_dbo.webpages_Membership] PRIMARY KEY ([UserId])
)
CREATE TABLE [dbo].[RoleUserProfile] (
    [Role_RoleId] [int] NOT NULL,
    [UserProfile_Id] [int] NOT NULL,
    CONSTRAINT [PK_dbo.RoleUserProfile] PRIMARY KEY ([Role_RoleId], [UserProfile_Id])
)
CREATE INDEX [IX_Role_RoleId] ON [dbo].[RoleUserProfile]([Role_RoleId])
CREATE INDEX [IX_UserProfile_Id] ON [dbo].[RoleUserProfile]([UserProfile_Id])
CREATE TABLE [dbo].[webpages_UsersInRoles] (
    [UserId] [int] NOT NULL,
    [RoleId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.webpages_UsersInRoles] PRIMARY KEY ([UserId], [RoleId])
)
CREATE INDEX [IX_UserId] ON [dbo].[webpages_UsersInRoles]([UserId])
CREATE INDEX [IX_RoleId] ON [dbo].[webpages_UsersInRoles]([RoleId])
ALTER TABLE [dbo].[RoleClaim] ADD CONSTRAINT [FK_dbo.RoleClaim_dbo.webpages_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Student] ADD CONSTRAINT [FK_dbo.Student_dbo.Training_Training_Id] FOREIGN KEY ([Training_Id]) REFERENCES [dbo].[Training] ([Id])
ALTER TABLE [dbo].[RoleUserProfile] ADD CONSTRAINT [FK_dbo.RoleUserProfile_dbo.webpages_Roles_Role_RoleId] FOREIGN KEY ([Role_RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId])
ALTER TABLE [dbo].[RoleUserProfile] ADD CONSTRAINT [FK_dbo.RoleUserProfile_dbo.UserProfile_UserProfile_Id] FOREIGN KEY ([UserProfile_Id]) REFERENCES [dbo].[UserProfile] ([Id])
ALTER TABLE [dbo].[webpages_UsersInRoles] ADD CONSTRAINT [FK_dbo.webpages_UsersInRoles_dbo.UserProfile_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([Id])
ALTER TABLE [dbo].[webpages_UsersInRoles] ADD CONSTRAINT [FK_dbo.webpages_UsersInRoles_dbo.webpages_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201307250828273_Initial', 0x1F8B0800000000000400DD5CCD6EE43612BE07C83B3474DA0D10B7ED248BD9417B064EDB5E1819DB836967AE062DB1DBCC4A9456647BEC67CB611F29AF1052AD1F8A7F2225F5CFCCAD2D921F8B55C562B18AE5BFFEFCFFECFD4B124F9E614E508ACF8293A3E3600271984608AFCE82355DFEF82678FFEEFBEF669751F232F95CF5FB89F7632331390B9E28CDDE4EA7247C82092047090AF394A44B7A14A6C91444E9F4F4F8F8DFD3939329641001C39A4C669FD698A204167FB03FE7290E6146D720BE49231893F23B6B5914A8935B90409281109E05D771787401280826E731026CFE058C97C124FBF9EDEF042E689EE2D522031481F8FE3583AC7D0962024B6ADF663FBB127C7CCA099E028C53CAE052DC6BC141BD14B6984BB668FACAC92A167416308AF38F79BA4431143BB2AEBFC1D7D607F68975CC604E5F3FC16539FC3A0A26D3F6B8A93CB01E268CE114B05F98FE741A4C6ED7710C1E6358338A717241D31CFE076298030AA38F805298633E16162B506695E6E0CBC2EC573513930A53A76072855E60F401E2157DAA67BB012FD517F63398FC8E11D33E3688E66B2852B7F95B9AF8163CA355211D89844F690C4930F904E3A2953CA16CA3294702CF1FCA5E57799AF09F2D816C1A1F16E93A0FF94A52538F7B90AF207527EDEE0B8691993EDEF2C0FBE42DCA84CFF58C154D625B45AF48CD6CDA689E551F39501F45E4E3FA2863356EDB0AC9E7B9F557C8D35FFE6551C8B2BF7DE6799A6400BF5A16E9A7D782FA8DA2DEB22A9937802B85F318A0C4ACDA4573012D6B77D3A25570A1D997A46A37F5DB6DB205D0EDC4DEBBAD58D5B764FB7B6CB31E765F9AF43388D7BB9FD5CD7AF99C58C3768D4E51359BAA97AEDEE70061CED66F48553FC6CCB983D182829C328FB25620FEFB9E79A777CB25E10CF334F925EC258E4604BD8004E5E3D3BA811D975446235D939DEFC6C5FAF10F18D23DFA9C0BBAE69AA73F68AA0DF4D0F46A36B2D2A8EC65B5C7A0ED5CA27C4BBB7907078F337B6F60F2C8DC0326FD3E1CE63E581F2E57E3FA72FA36C5DDFE6C0ED9189DB5F0DDAFECCEBF447952EC93FBF4BF107B0AEFE4F4CD408B714D4A1A60CDB45F53B6DB00F645FA0008FD0808F992E6D11540F13A1F8545122459201C423ED7621D8690104FD7C3803E2ADFBD669E3F01BC82DAB3A72FAB1620F63D02465CD06798A3250AF7A8D3464A2E5F3294177FFAB3DB64F7CE0949435480CA579A074D2881B91913BBE3BAE155CBE965FC59C71465310A190567C10F0A078CB0F52DB20D2B239E04B249BEC3173086144ECE435A843BE78084205299CFF812B5BF302B0E737E608198191742F9B14D5593CF3632CA406CA55B1AE51178E194D573C82D173083989FA956590C9BBC9E4362571777665341A5BA35ADBAB8DBF441B9C5DB95A14BBD94105C03270673EDA81ECB54C33926EA2CA1CB3E3476603BEEADFE0B57FD65137116E7B921AEBEBF4A041E1F1D9D58166E76BB05ECCA99EEB9F68D6D65FB81B2B9605EAEFF3CCBF827F8223BE99BEE0B48B511C1C650EB24AEACB30D55C60B158C8D643B0657713FEDE8D294774054DCD6A13402EC0069EE570A462DA80E08C17D5741C446094710709BA962F846E8A40FF0C8D6B4F3D8ACC96F84A098E4CE43520029D5403EEBDAAB735C791D5BD52F5B6BC13B6D7817AD9D565B00686F9FC16BD684DFD59577187547B3EEB8084743BE05F96B421E2A2F3AECBCA3A517A8178C88851166C32E4035743BF3A272956B73DEA4B2A79B5C7695F39E1A92DEB31B90659CFE6664F965B2D864C0E73F2EFC73D1C906631A124D4ABAA6B69E89A6395841A9955FDA23788572C26390E011F0EBCB3C4A946EDD87573591E60C53855659E06A10FF5D5EE1CBC70047C64CBAC8C02BB6A6847BBE450044BF7FD4D1C52B0410835C13D49AA7F13AC1A6C0986D74932317319AAF2AD26C2A2D4371BB154E29B79536F79D646332500E42D11D670ED2D00F3331B2BA85886C34DD4CEC28B78A389AAFEE4842C65784123E1F8C684B6FA1B76C35C94B67011BC66E67B3A992F5956A99611421CA4F7E3AE6AEA97BD289E6F8ECA516FA3CA1935698876E4729D4F49F88A5B67A23D769350D6EDDE68EAAA600455CB5D517594BAED4E48E59650145B0EA9B074A95D46BC1541F0F66D3587C57873DA34DC615C3BBB68C71E4BECDE89EE460CABBB94AC23CDE4118B6C1362F5096893EFD67431193722D9F43F8EEE3C02889B9B623A334BB63B7526E2D45141BDCF18C893711DBD8C9C3A27766E25A36BEB3B7FFCCFA19FA20B5B26E3AD056077FFC4D0A4E07BC69F147D4A4D574F09A6E23CC2527CE9C669607EDDE42B62314EA95AE0ECC197CFBBA5DE7BC5BEECB3CC6A2F17BA5109ECA0E2F8FF9C19C7A12A6F7A3CC9875733A48C5C09A1F617230C95B9A9A90A33D4052F5B244414C8168F36BE476707200174710AB31CA3950ED762C584DFCD472E3127A39BA891ACE1923AC3D055AE38D205563C8B6276DDE24310F2542458AF29AF0E712F50B0EC715772B84123D96BBD4A7461D4596A2C5B33272DB5D47A58472375D82095BFE338A781877F14A284CCA4BCAFFE2798C8AEC59D5E10660B484841627DE59707A7CFC462ACAEA51303525248A0FB86A0A710E743E55F47C3F24174CE16790874F20FF47025EFE39D29BC4FDD6F66C856D72594FC536B5886768D54E41FE6862D853D1C75664A0E3BF83DAAA40AD1A8E41481ACDB32EEA2B2882D88AE84CF50F11FBCDAB73D331EB1F06829AEA1F46811D97D476FDC3204D966A1AB6712CECAD12E0B0AD51CB8D1BFB0C3884F2806EB3A8391695C7FFD55619EDF1BFF6082F9E450F7EDBFF883AE4A7A274BCEBEFBB7AD777FD7D6424BFEA7761E8D047FB43F9203EDA1F9D5EE39BFCB154CDF3C9BD1BB3BCFCC98117227B444D6F80CCB12EB79BC183AF93A6B7672219A3BB7BD678D8105B3DEA3D6BB8591FCB5F1E540EB2DB320DCD73D8BEE527BD2B3E765EE071F8451DFE8FFEC778E45F3F0BF77ED3DF57FC9657322E6EB697F8CDAF0BD4A93AC2B5BB2DEBD1869EFDAD86BD9EA7551E21617915CB7C1566C0FE4AD6D733D8B53EE8C2FDFAB7EDAE354F87AD1DBED2DA838274A73D77A0236E59C8ED698AEC271A20DDCA0DBF064DE94814FB79C2FBD1900E5B32F86CD9BF4EECF26CE9A3103B3C56A4A46A1D83926B5964611A0B2DBBEA2C37A95476D77F4C99E4371729DF424C631DA60EFC0B7CCCC08AE9B5BE764B875F5E6FB493946DBA998466C76A4E6B31A76E0ADF524F5BA5A70E7FF43250AB442CF5A23AB1D8B54CE96112918FB629F6C8A6DC0E3AC87B936BAC57C55DD4C82AD58C6E05B1CA30BD9E1F5021A4B6F0D1BA5869CBB49E078D5AF15B97665A0B7F0DCF8B06CB53B38BB48F17C75D7255426A5FB2FED592C93DD5BFCF3B2006980B941D0A9FBBE53F941906E3A67DF0B80D669875C2F595E2A0CDB09DE57B5439ABEFD1982327FCF7EF194FC1AF1A08FECA0EC3B0E5C2D57DAEF132AD3C4989A2AA8B14DBBE811444CCBF3BCF295A8290B2669E612BCC64F1E2E42CB864E773748DEFD6345B53B664765EC7ADFF36C73D52DBFC4529779BE6D95D56FCFFBF3196C0C8443C6974877F5DA338AAE9BED244E60D10DCD52DB3EC5C969467DB57AF3592FA8FDF4C4025FB6A0FFD1E2659CCC0C81D5E806768A6AD9B876D8ECD2E1058E520212546339EFDC9D42F4A5EDEFD0DF91FFB29BF5E0000, '5.0.0.net45')
